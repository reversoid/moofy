<div class="title-wrapper">
  <h1 class="tui-text_h1">{{ collectionName$ | async }}</h1>
  <tui-svg [tuiHint]="lockContent" tuiHintDirection="right-bottom" src="tuiIconLockLarge"></tui-svg>

  <ng-template #lockContent>Это приватная коллекция</ng-template>
</div>

<div class="collection-info-grid">
  <app-description-island [description]="description$ | async"></app-description-island>

  <app-creator-island [user]="creator$ | async"></app-creator-island>

  <div class="metadata-grid">
    <app-updated-island [date]="updatedAt$ | async"></app-updated-island>
    <app-image-island [imageUrl]="imageUrl$ | async"></app-image-island>
  </div>

  <app-stats-island
    [collection]="collection$ | async"
    [isPersonal]="(isPersonal$ | async) ?? false"
    [stats]="stats$ | async"
  ></app-stats-island>
</div>

<button
  (click)="showInfoAboutCollection()"
  class="about-collection tui-space_top-4"
  tuiButton
  appearance="secondary"
>
  О коллекции
</button>

<div class="reviews-title">
  <h3 class="tui-text_h3">Фильмы</h3>
  <button (click)="createReview()" tuiIconButton icon="tuiIconPlusLarge"></button>
</div>

<tui-input
  [tuiTextfieldLabelOutside]="true"
  class="search-input tui-space_bottom-5"
  tuiTextfieldIconLeft="tuiIconSearchLarge"
  [tuiTextfieldCleaner]="true"
  [formControl]="search"
>
  Поиск
  <input tuiTextfield role="search" />
</tui-input>

<app-review-conflicts-block
  *ngIf="showConflictsBlock$ | async"
  (conflictsResolved)="refreshReviews()"
></app-review-conflicts-block>

<ng-container *ngIf="reviewsExist$ | async; else noReviews">
  <app-review-list
    [loading]="refreshingReviews()"
    [loadingMore]="loadingMoreReviews()"
    [paginatedReviews]="reviews$ | async"
    (loadMore)="loadMoreReviews($event.loadKey)"
  ></app-review-list>
</ng-container>

<ng-template #noReviews>
  <app-empty-collection-placeholder> </app-empty-collection-placeholder>
</ng-template>
